# MOOSE Newsletter (May 2025)

## MOOSE Improvements

### Input Syntax Highlighting in Documentation

The MOOSE documentation generation engine, named MooseDocs, now has syntax
highlighting for MOOSE input snippets. This includes an additional feature that
automatically links to syntax, object, and parameter documentation within the
code snippets if including the [AppSyntax extension](extensions/appsyntax.md).
Readers can hover over the object name and parameter to get a description of the
object and parameters. The syntax and objects are also linked to their
prescribed documentation pages; readers can click on these links directly in the
snippet to navigate to these pages. Try it out with the following examples:

!devel! example
!listing! language=moose
[FunctorMaterials]
  [mat]
    type = ParsedFunctorMaterial
    property_name = 'pressure'
    expression = 'rho * R * T'
    functor_symbols = 'rho R T'
    functor_names = 'density ${gas_constant} temperature'
  []
[]
!listing-end!
!devel-end!

!devel example
!listing moose/test/tests/kernels/simple_diffusion/simple_diffusion.i

### Postprocessor Restore on Failed Timestep

[Postprocessors](Postprocessors/index.md) are now automatically restored to
their previous value when a solve fails in a timestep. Previously, statefulness
was observed in postprocessor values when a timestep was repeated due to a
failed solve, potentially causing discrepancy in the converged solution.
[VectorPostprocessors](VectorPostprocessors/index.md) and
[Reporters](Reporters/index.md) are also restored, but only if an old value has
been requested. More information can be found on the linked pages.

## MOOSE Modules Changes

### Thermal Hydraulics: Gas Mixture Flow Model

The [Thermal Hydraulics module](modules/thermal_hydraulics/index.md) has added the [Gas mixture flow model](modules/thermal_hydraulics/theory_manual/gas_mix_model/index.md), which allows one-dimensional gas mixtures to be simulated using a single-phase mixture formulation, which resembles the [Single-phase flow model](modules/thermal_hydraulics/theory_manual/vace_model/index.md) but with an additional partial differential equation for the secondary gas species and additional terms for diffusion of mass and energy.

### Heat Transfer module

The finite volume discretization for the heat conduction equation can now support functors for the material properties.

### Fluid Properties module

[LeadLithiumFluidProperies.md] were added to the module to model fluid flow in fusion device blanket components.

## libMesh-level Changes

### `2025.05.23` Update

- Added a `System::parameters` object, which can be used to
  selectively override `EquationSystems::parameters`
- Improved support for vector-valued elements on meshes with 2D
  elements outside the XY plane in 3D space
- Initial support for `Polyhedron` type elements, with one basic
  subclass and hand-coded unit tests.  Critical support for mesh
  generation and I/O is still forthcoming.
- The `Elem::set_node()` setter which returns a reference has been
  deprecated and replaced by a version which takes the value to set.
  This provides compatibility with new Polyhedron support.
- Added `Elem::type_to_dim_map` and `Elem::type_to_default_order_map`,
  enabling code to query the dimension and/or default order of an
  `ElemType` without actually building an element.
- Added `NumericVector::print_matlab()` and
  `NumericVector::read_matlab()` I/O methods
- `MeshBase::write()` is now a `const` member
- `Elem::disconnected_clone()` can now clone elements which have not
  yet been given a valid `unique_id()`.
- Autodetection of slate use in PETSc, to initialize MPI with the
  `MPI_THREAD_MULTIPLE` setting for slate compatibility.
- `solid_angle()` function for evaluating the solid angle defined by
  three vectors
- Code refactoring for clarity and simplicity:

  - Orientation-determining code for advanced finite element types
  - `Tet::choose_diagonal()` for tetrahedron refinement
  - More local variables declared `const` as appropriate
  - Unit tests are easier to make compatible with `--enable-complex`
    builds

- Removed workaround for overzealous gcc 8.1 warnings about gzstream
  headers; newer compilers including gcc 8.5 do not emit warnings.
- Avoid poor triangulator behavior when given an inconsistent boundary
  input mesh
- Performance logging of `n_connected_components()` mesh tool
- Many bug fixes:

  - More rigorous implementation and verification of
    `MeshBase::clone()`.  This fixes issues that can arise when
    certain `MOOSE` mesh generators accept input meshes which are
    incompletely prepared and have been cloned for use in multiple mesh
    generators.
  - `UnstructuredMesh::copy_nodes_and_elements()` no longer copies
    other metadata such as preparation policy settings from its source
    mesh.  That copying has been moved to copy constructors which need
    it, and no longer occurs during mesh stitching.  This fixes
    partitioning failures in a reactor module mesh generator.
  - `UnstructuredMesh::copy_nodes_and_elements()` is more careful
    about marking its target as unprepared if any combination of
    inputs might cause it to be unprepared
  - Fix for automatic interior-parents detection on refined meshes
  - Backported NetCDF fix for compatibility with C23 C compilers
  - Fixes for compiler `-fsanitize-integer` warnings
  - Many fixes for libMesh builds with `Real` defined to be other than
    `double`.  Many more libMesh capabilities such as higher-order
    quadrature rules are no longer truncated to 64-bit or 80-bit
    accuracy when used with 128-bit-`Real` builds.

## PETSc-level Changes

## Bug Fixes, Minor Changes, and Minor Enhancements

- MOOSE will now error if coordinate transformation parameters are passed in a single simulation context. These parameters are intended for coupling between `MultiApps` using different frames of references.
- The [CopyMeshPartitioner.md] was added to MOOSE to let a MultiApp copy the spatial mesh partitioning of its parent application. This is intended to reduce the amount of off-process communication in [Transfers](Transfers/index.md).
- The [FunctorExtremaPositions.md] was added to MOOSE to gather the locations of N extrema (max/min/max absolute) of a functor. In future works, this will let us spawn simulations at these bounding locations
- [Physics](Physics/index.md) can now skip object-creation tasks through the `dont_create_kernels/bcs/...` parameters that a user passes. This can be useful to combine `Physics` with standard MOOSE syntax.
- Recover testing has been enabled on the `contact` and `combined` modules. This ensures that future development in those
  modules can either create a checkpoint and recover from this checkpoint, or properly error if it does not support this
  feature.
- The [SidesetAroundSubdomainModifier.md] can now support updating boundaries as they traverse inside h-refined elements during adaptivity.
- PETSc options can now be passed to each equation solve inside the subchannel problems, using the pre-defined prefixes.

## Conda Package Changes
